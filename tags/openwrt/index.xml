<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>openwrt on cavemancave</title><link>https://cavemancave.github.io/tags/openwrt/</link><description>Recent content in openwrt on cavemancave</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sat, 17 Dec 2022 13:07:27 +0000</lastBuildDate><atom:link href="https://cavemancave.github.io/tags/openwrt/index.xml" rel="self" type="application/rss+xml"/><item><title>OpenWrt折腾记录</title><link>https://cavemancave.github.io/posts/2022-12-17-openwrt/</link><pubDate>Sat, 17 Dec 2022 13:07:27 +0000</pubDate><guid>https://cavemancave.github.io/posts/2022-12-17-openwrt/</guid><description>简介 Link to heading 记录本次OpenWrt作为旁路由配置过程。
硬件是小米路由器4A千兆版，固件是OpenWrt 21.02.2，家中的网络拓扑是光纤后一个主路由负责DHCP和防火墙，客厅，主卧，书房各一个路由器负责wifi接入。从路由器都设置成中继模式，保证家中设备都在一个局域网内。
wifi同名，开启802.11r/802.11w，保证wifi可以快速漫游。
目前在NAS上长期运行着代理客户端，并向局域网提供socks和http代理，局域网内部分设备设置代理服务器为NAS地址，经NAS代理出海。
计划在其中一台从路由器上设置透明代理，供不能设置代理服务器的设备使用，并减少其他设备手动设置流程。
重置和安装LuCI界面 Link to heading 长按10秒复位按钮可以重置，重置后默认地址是192.168.1.1，root账户无密码，我安装的这个镜像无LuCI界面，需要ssh登录后安装LuCI 电脑网线连接OpenWrt的Lan口，OpenWrt的Wan口连主路由器的Lan口 ssh root@192.168.1.1 opkg update opkg install luci # Providing encryption (https) opkg install luci-ssl /etc/init.d/uhttpd restart 访问网页https://192.168.1.1，无密码成功登录 设置静态ip地址 Link to heading 查看OpenWrt的Wan口分配到的Ip地址192.168.0.12 Lan口设置静态地址为192.168.0.12，关闭DHCP Network-&amp;gt;Interfaces-&amp;gt;LANProtocol: Static addressIPv4 address: 192.168.0.12DHCP Server: Ignore interface 不知道为什么设置成静态地址后，无法登录LuCI界面，怀疑是防火墙的原因。防火墙增加2条规则，允许从Lan和Wan口访问LuCI界面 Network-&amp;gt;Firewall-&amp;gt;Traffic Rules AllowWlan80 From wan, To this device, port 80 Allowlan80 From lan, To this device, port 80 主路由器静态地址分配绑定Ip地址192.</description></item></channel></rss>